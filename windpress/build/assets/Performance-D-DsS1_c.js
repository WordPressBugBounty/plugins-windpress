import{_ as V,a as Y}from"./PageCard-BH9JP5Xc.min.js";import{e as F,j as P,m as T,k as j,d as O,c as z,_ as A,a as Z,q as $}from"./dashboard-KRVprCLv.js";import{_ as L}from"./Separator-B_hiimdN.min.js";import{_ as N}from"./FormField-CoSeltsl.min.js";import{_ as U}from"./Switch-DHvfi233.min.js";import{d as I}from"./dayjs.min-DWUdwifa.min.js";import{a as H}from"./worker-DuwNrzuJ.js";import{m as q,W as K,a5 as J,Y as w,Z as r,j as n,u as l,am as Q,_ as h,a0 as x,$ as R,a4 as _,a3 as v,a2 as y}from"./runtime-core.esm-bundler-Cyr_sIeO.min.js";import"./runtime-dom.esm-bundler-CXswOtsW.min.js";import"./index-BWcrFNHu.min.js";import"./isObject-K1YoVIH1.min.js";import"./preload-helper-CsYsLKPR.min.js";import"./index-Cn5s_dft.min.js";import"./source-map-generator-DjbDy59a.min.js";import"./chunk-HTB5LLOP-Cay67bh1.min.js";import"./floating-ui.core-0WkvgGWJ.min.js";import"./virtualRef-Dmg8xu3r.js";import"./set-Dt5k9sTt.min.js";import"./_toKey-BxB36GnB.min.js";import"./get-DBhW7rda.min.js";import"./_initCloneObject-DlLbeobz.min.js";import"./package-BtTmAzXr.min.js";import"./fuse-Ch1WBRTM.min.js";import"./index-C5HG4pYD.min.js";import"./index-BAMY2Nnw.min.js";import"./index.browser-B0na17u1.min.js";import"./redaxios.module-D8m3meIN.min.js";import"./index-BQgNu2nd.min.js";const W=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],X=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],ee=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],ie=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],B=(e,i,t)=>{let s=e;return typeof i=="string"||Array.isArray(i)?s=e.toLocaleString(i,t):(i===!0||t!==void 0)&&(s=e.toLocaleString(void 0,t)),s},S=e=>{if(typeof e=="number")return Math.log10(e);const i=e.toString(10);return i.length+Math.log10("0."+i.slice(0,15))},ae=e=>typeof e=="number"?Math.log(e):S(e)*Math.log(10),te=(e,i)=>{if(typeof e=="number")return e/i;const t=e/BigInt(i),s=e%BigInt(i);return Number(t)+Number(s)/i};function ne(e,i){if(typeof e!="bigint"&&!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);i={bits:!1,binary:!1,space:!0,...i};const t=i.bits?i.binary?ie:ee:i.binary?X:W,s=i.space?" ":"";if(i.signed&&(typeof e=="number"?e===0:e===0n))return` 0${s}${t[0]}`;const o=e<0,u=o?"-":i.signed?"+":"";o&&(e=-e);let c;if(i.minimumFractionDigits!==void 0&&(c={minimumFractionDigits:i.minimumFractionDigits}),i.maximumFractionDigits!==void 0&&(c={maximumFractionDigits:i.maximumFractionDigits,...c}),e<1){const d=B(e,i.locale,c);return u+d+s+t[0]}const a=Math.min(Math.floor(i.binary?ae(e)/Math.log(1024):S(e)/3),t.length-1);e=te(e,(i.binary?1024:1e3)**a),c||(e=e.toPrecision(3));const m=B(Number(e),i.locale,c),f=t[a];return u+m+s+f}const se={class:"flex gap-2 items-center"},le={class:"flex gap-2 items-center"},re={class:"font-semibold"},oe={key:0,class:"flex gap-1"},ce=q({__name:"Performance",setup(e){const i=H();F();const t=P(),s=T(),o=K({last_generated:null,last_full_build:null,file_url:null,file_size:null});function u(){i.get("admin/settings/cache/index").then(a=>{o.value=a.data.cache})}async function c(){$(a=>{u()})}return J(()=>{u()}),(a,m)=>{const f=Y,d=U,b=N,g=L,C=O,k=j,M=z,G=Z,D=A,E=V;return y(),w(E,{id:"performance",state:{}},{default:r(()=>[n(f,{title:a.i18n.__("Performance","windpress"),variant:"naked",orientation:"horizontal",class:"mb-4"},null,8,["title"]),n(f,{variant:"subtle"},{default:r(()=>[n(b,{label:a.i18n.__("Use cached CSS","windpress"),description:a.i18n.__("Serve the cached CSS file when available instead of generating the style dynamically using the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:r(()=>[n(d,{modelValue:l(t).virtualOptions("performance.cache.enabled",!1).value,"onUpdate:modelValue":m[0]||(m[0]=p=>l(t).virtualOptions("performance.cache.enabled",!1).value=p),label:a.i18n.__("Enable Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),n(g),n(b,{label:a.i18n.__("Admin always uses Compiler","windpress"),description:a.i18n.__("Exclude the Admin from the cached CSS to ensure they always use the Compiler.","windpress"),class:"flex items-center justify-between gap-4"},{default:r(()=>[n(d,{modelValue:l(t).virtualOptions("performance.cache.exclude_admin",!1).value,"onUpdate:modelValue":m[1]||(m[1]=p=>l(t).virtualOptions("performance.cache.exclude_admin",!1).value=p),label:a.i18n.__("Exclude Admin","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),n(g),n(b,{label:a.i18n.__("Cached CSS loading method","windpress"),description:a.i18n.__("Load cached CSS as an inline instead of an external file.","windpress"),class:"flex items-center justify-between gap-4"},{default:r(()=>[n(d,{modelValue:l(t).virtualOptions("performance.cache.inline_load",!1).value,"onUpdate:modelValue":m[2]||(m[2]=p=>l(t).virtualOptions("performance.cache.inline_load",!1).value=p),label:a.i18n.__("Inline Cached CSS","windpress"),ui:{label:"whitespace-nowrap"},class:"flex-row-reverse gap-2"},null,8,["modelValue","label"])]),_:1},8,["label","description"]),n(g),n(b,{label:a.i18n.__("Generate the cached CSS","windpress"),class:"flex items-center justify-between gap-4"},Q({default:r(()=>[n(D,{"delay-duration":0,text:a.i18n.__("Generate the cached CSS file","windpress")},{default:r(()=>[n(G,{color:"primary",variant:"subtle",onClick:c,disabled:l(s).isBusy,loading:l(s).isBusy&&l(s).hasTask("settings.performance.cached_css.generate")},{default:r(()=>[v(_(l(s).isBusy&&l(s).hasTask("settings.performance.cached_css.generate")?a.i18n.__("Generating...","windpress"):a.i18n.__("Generate","windpress")),1)]),_:1},8,["disabled","loading"])]),_:1},8,["text"])]),_:2},[o.value.last_generated?{name:"description",fn:r(()=>[h("div",se,[h("div",le,[h("span",re,_(a.i18n.__("Last Generated","windpress"))+": ",1),o.value.file_size?(y(),R("span",oe,[v(_(l(I)(o.value.last_generated*1e3).format("YYYY-MM-DD HH:mm:ss"))+" ",1),n(k,{to:o.value.file_url,target:"_blank",class:"underline"},{default:r(()=>[n(C,{name:"lucide:external-link"})]),_:1},8,["to"])])):x("",!0)]),o.value.file_size?(y(),w(M,{key:0,color:"success",variant:"subtle"},{default:r(()=>[v(_(l(ne)(o.value.file_size,{maximumFractionDigits:2,space:!0})),1)]),_:1})):x("",!0)])]),key:"0"}:void 0]),1032,["label"])]),_:1})]),_:1})}}});export{ce as default};
